<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../css/beaurify.css" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.1/dist/css/datepicker-bs5.min.css"
        />
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
        ></script>
		<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
        <title>New Article Form</title>
    </head>
    <body>       
        <main>
            <div class="container">
                <div class="jumbotron pt-4">
                    <h1 class="new-sensor-form-title">New Article</h1>
                    <p>Please, use this form to create a new article. Note that the article may or may not be associated with the current calibration procedure.
						If the article is not related to selected calibraton procedure, uncheck the box below.
					</p>
                </div>

				<div class="row d-flex justify-content-center text-center">
					<h4 class="procedure-name"></h4>
				</div>


				<!-- New Article Form -->
                <form id="new-article-form">
					<div class="control-form-field-box form-group my-4 p-2">
						<div class="container">
							<div class="row">
								<!--Associated with Calibration Procedure?-->                            

								<div class="col-lg-6 col-sm-12 mb-sm-4">
									<div class="form-check">
										<input
											name="procedureAssociated"
											class="form-check-input"
											type="checkbox"
											value=""
											id="procedureAssociated"
											aria-describedby="procedureAssociated#Help"
										/>
										<label
											class="form-check-label"
											for="procedureAssociated"
										>
											Do you want to associate this article to current calibration procedure?
										</label>
									</div>
									<small
										id="procedureAssociated#Help"
										class="form-text text-muted"
									>
									Check this box if this article is associated to current calibration procedure.
									</small>
								</div>   
								
								<div class="col-lg-3 col-md-6 col-sm-6 mb-sm-4 calibration-procedures-list-wrapper">
									<label for="calibrationProcedures"
										>Calibration Procedures</label
									>
									<select
										name="calibrationProcedures"
										class="form-select"
										aria-label="Please, select aa calibration procedures applicable to this article"
										id="calibrationProcedures"
										aria-describedby="calibrationProcedures#Help"
										>
										<!----->
										
									</select>
									<small id="calibrationProcedures#Help" class="form-text text-muted">
										Please, select procedures
									</small>
									
								</div>

								<div class="col-lg-2 col-md-4 col-sm-4 mb-sm-4 counter-wrapper d-flex align-items-center justify-content-end">
								Total: &nbsp<span style="font-size: large;" 
									class="badge bg-dark calibration-procedures-quantity"></span>
								</div>
								<div class="col-lg-1 col-md-2 col-sm-2 mb-sm-4 reset-button-wrapper d-flex align-items-end flex-column">
									<button class="btn mt-4 mr-5 bg-body-secondary procedures-quantity-reset-button">Reset</button>

								</div>
							</div>
						</div>
					</div>

					<!-- Article Title -->
					<div class="control-form-field-box form-group my-4 p-2">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-12 col-sm-12 mb-sm-4">
									<div class="mb-3">
										<label for="articleTitle" class="form-label">Article Title</label>
										<input
											name="title"
											type="text"
											class="form-control"
											id="articleTitle"
											aria-describedby="articleTitleHelp"
											placeholder="Please, enter article's title here"
											required
										/>
										<small id="articleTitleHelp" class="form-text text-muted"
											>The title of the article.</small>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Science Branch Selection -->

					<div class="control-form-field-box form-group my-4 p-2">
						<div class="container">
							<div class="row">
								<div class="col-lg-12 col-sm-12 mb-sm-4">
									<div class="mb-3">
										<label for="articleScienceBranch" class="form-label">Science Branch</label>
										<select
											name="scienceBranch"
											class="form-select"
											id="articleScienceBranch"
											aria-describedby="articleScienceBranchHelp"
											required
										>											
											<!--more options are dynamically added by javascript-->
										</select>
										<small id="articleScienceBranchHelp" class="form-text text-muted"
											>The science branch of the article.</small>
									</div>
								</div>	
							</div>
						</div>
					</div>




					
					<!-- Article Preface -->
					<div class="control-form-field-box form-group my-4 p-2">
						<div class="container">
							<div class="row">
								<div class="col-lg-12 col-sm-12 mb-sm-4">
									<div class="mb-3">										
										<label for="articlePreface" class="form-label">Article Preface</label>
										<input
											name="preface"
											type="text"
											class="form-control"
											id="articlePreface"
											aria-describedby="articlePrefaceHelp"
											placeholder="Please, enter article's preface here"
											required
										/>
										<small id="articlePrefaceHelp" class="form-text text-muted"
											>The preface of the article.</small>
									</div>
								</div>
							</div>
						</div>	
					</div>



					<!---Math JAX Script Translation-->					
					<div class="control-form-field-box form-group my-4 p-2" style="background-color: azure;">
						<div class="container">
							<div class="row math-jax-translation justify-content-start align-content-center">
								<div class="col-lg-12 col-sm-12 mb-sm-4">
									<label for="mathJaxScript" class="form-label">Math Jax Script</label>
									<input  
										type="text"
										id="mathJaxScript"
										class="math-jax-script"
										style="margin-top: 0.5rem; width: 100%; border-color: blue; border-radius: 3px; padding: 5px 3px;"
										placeholder="Enter MathJax script here"
									/>
									<small id="mathJaxScriptHelp" class="form-text text-muted"
									>Enter Math JAX script here to display its translated output below...</small>
								</div>
								<div class="col-lg-12 col-sm-12 mb-sm-4 d-flex">									
									<span class="math-jax-formula m-2" id="mathJaxFormula"></span>		
								</div>
								
							</div>
						</div>

					</div>
					
					
					

					<!-- Article Content and Paragraph Quantity -->
					<div class="control-form-field-box form-group my-4 p-2">
						<div class="container">
							<div class="row">
								<div class="col-lg-2 col-sm-2 mb-sm-4">
									<label for="articleParagraphQuantity" class="form-label">Paragraph Quantity</label>
									<input
										name="paragraphQuantity"
										type="number"
										class="form-control"
										max="10"
										min="0"
										id="articleParagraphQuantity"
										aria-describedby="articleParagraphQuantityHelp"
										placeholder="0"
										required
									/>
								</div>
								<div class="col-lg-10 col-sm-10 mb-sm-4">									
									<div class="mb-3">
										<label for="articleContent" class="form-label">Article Content</label>
										<textarea
											name="content"
											class="form-control"
											id="articleContent"
											rows="6"
											aria-describedby="articleContentHelp"
											placeholder="Please, enter article's main content here"
											required
										></textarea>
										<small id="articleContentHelp" class="form-text text-muted"
											>The main content of the article.</small>
									</div>
								</div>
							</div>
						</div>
					</div>


					

					<!-- Article Image Link -->
					<div class="control-form-field-box form-group my-4 p-2">
						<div class="container">
							<div class="row">
								<div class="col-lg-12 col-sm-12 mb-sm-4">
									<div class="mb-3">
										<label for="articleImageLink" class="form-label">Article Image Link</label>
										<input
											name="imageLink"
											type="text"
											class="form-control"
											id="articleImageLink"
											aria-describedby="articleImageLinkHelp"
											placeholder="Please, enter article's image link here"
											required
										/>
										<small id="articleImageLinkHelp" class="form-text text-muted"
											>The image link of the article.</small>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Internet Resource Link -->
					<div class="control-form-field-box form-group my-4 p-2">
						<div class="container">
							<div class="row">
								<div class="col-lg-12 col-sm-12 mb-sm-4">
									<div class="mb-3">
										<label for="resourceLink" class="form-label">Internet Resource Link</label>
										<input											
											name="resourceLink"
											type="text"
											class="form-control"
											id="resourceLink"
											aria-describedby="resourceLinkHelp"
											placeholder="Please, enter article's resource link here"
											required
										/>
										<small id="resourceLinkHelp" class="form-text text-muted"
											>The resource link of the article.</small>
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="container"><span class="new-article-valid-input"></span></div>


					<!-- User Login Error Modal -->
					<div class="modal fade" id="new-article-auth-error-modal">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-body">
									<div class="alert alert-block alert-danger">
										<h4>Error!</h4>
										<span id="error-text-content"></span>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Warning Modal: -->
					<div
						class="modal fade"
						id="createNewArticleModal"
						data-bs-backdrop="static"
						data-bs-keyboard="false"
						tabindex="-1"
						aria-labelledby="createNewArticleModalLabel"
						aria-hidden="true"
					>
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header"> 
									<h1 class="modal-title fs-5 text-center container-fluid" id="createNewArticleModal">
										<span class="new-cal-record-modal-header badge bg-info"></span>  
									</h1>  
									<button
										type="button"
										class="btn-close"
										data-bs-dismiss="modal"
										aria-label="Close"
									></button>
								</div>
								<div class="modal-body">
									<h3>Do you want to add this article record to database?</h3>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
										Close
									</button>
									<button type="button" class="btn btn-primary" onclick=createNewArticleRecord()>
										Create
									</button>
								</div>
							</div>
						</div>
					</div>
					
                    <!--Buttons Container-->
                    <div class="container">
                        <div class="row m-5">
                            <div class="form-group col text-center">
                                <button
                                    id="get-article-form-values"
									type="submit"
									class="btn btn-primary"
									data-bs-toggle="modal"
									data-bs-target="#createNewArticleModal"
								>
									Submit                                            
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="resetNewArticleForm()">
                                    Reset
                                </button>
                                <a href="../html/viewCalibrationProcedures.html" class="btn btn-dark">Back</a>
                            </div>
                        </div>
                    </div>
					<!---->

                </form>
            </div>
        </main>

		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
			integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
			crossorigin="anonymous"></script>    
		</script>

		<!--classes & collections-->
		<script src="../js/utils/getRequestHeaders.js"></script>>
		<script src="../js/classes/dataGlobalStorage.js"></script>
		<script src="../js/classes/articleGlobalFactory.js"></script>
		<script src="../js/collections/editArticleContainer.js"></script>		
		<script src="../js/collections/newArticleFormContainer.js"></script>
		<script src="../js/collections/articleCategoryContainer.js"></script>
		<script src="../js/utils/filterObjectFromKeyValuePairs.js"></script>
		
		
		
		<!--User Interface & API endpoint functions & utils-->		
		<script src="../js/article/fetchAllCalProcedureData.js"></script>
		<script src="../js/article/utils/mathJaxInputChangeValueCallback.js"></script>
		<script src="../js/article/utils/updateArticleParagraphQty.js"></script>		
		<script src="../js/article/getNewArticleFormValues.js"></script>		
		<script src="../js/article/createNewArticleRecord.js"></script>			
		<script src="../js/article/utils/toggleCalibrationProceduresListVisilibity.js"></script>
		<script src="../js/article/utils/updateProcedureQuantitySelected.js"></script>
		
        <script>
            function resetNewArticleForm() {
                window.location.reload();
            }			
        </script>
    </body>
</html>
