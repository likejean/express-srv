<!DOCTYPE html>
<html>
    <head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../css/beaurify.css">
		<link 
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
			rel="stylesheet" 
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
			crossorigin="anonymous">
		<link rel="stylesheet" 
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" 
		/>
		<script 
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
			crossorigin="anonymous">
		</script>
		
		<title>Calibration Record</title>
    </head>
    <body>

		<div class="container-fluid">
			<div class="row d-flex justify-content-center">
				<div class="card border-success my-5" style="max-width: 35rem;">
					<div id="cardHeader" class="card-header bg-transparent border-success text-center"><h3>Calibration Record</h3></div>
			
			
					<div class="card-body text-success">
						<h5 class="card-title text-center"></h5>

						<div class="d-none d-sm-flex align-items-center">                           
							<div class="col-5 badge bg-success">Sensor:<span id="sensor-name"></span></div>     
							<div class="col-2 text-center"><i class="fa-solid fa-certificate"></i></div>           
							<div class="col-5 badge bg-success">Procedure:<span id="procedure-name"></span></div> 
						</div>
						<hr/>

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Calibration Name:</div>               
							<div id="calNameWrapper" class="col-6"><span class="cal-notice-span" id="calName"></span></div>                
							<div class="p-2 col-1"><i id="calNameIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>							
						</div>
						<hr/>

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Calibration Last Date:</div>               
							<div id="lastCalDateWrapper" class="col-6"><span class="cal-notice-span" id="lastCalDate"></span></div>                
							<div class="p-2 col-1"><i id="lastCalDateIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>
						</div>
						<hr/>

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Calibration Due Date:</div>
							<div id="dueCalDateWrapper" class="col-6"><span class="cal-notice-span" id="dueCalDate"></span></div>
							<div class="p-2 col-1"><i id="dueCalDateIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>
						</div>
						<hr/>

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Calibration Extended:</div>
							<div id="calExtendedWrapper" class="col-6"><span class="cal-notice-span" id="calExtended"></span></div>
							<div class="p-2 col-1"><i id="calExtendedIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>
						</div>
						<hr/>

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Maximum Calibration Extension:</div>
							<div id="maxCalExtentionWrapper" class="col-6"><span class="cal-notice-span" id="maxCalExtention"></span></div>
							<div class="p-2 col-1"><i id="maxCalExtentionIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>
						</div>
						<hr/>

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Calibration Range Percent:</div>
							<div id="calRangePercentWrapper" class="col-6"><span class="cal-notice-span" id="calRangePercent"></span></div>
							<div class="p-2 col-1"><i id="calRangePercentIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>
						</div>
						<hr/>

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Adjustment Made:</div>
							<div id="calAdjustmentMadeWrapper" class="col-6"><span class="cal-notice-span" id="calAdjustmentMade"></span></div>
							<div class="p-2 col-1"><i id="calAdjustmentMadeIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>
						</div>
						<hr />

						<div class="d-flex align-items-center">
							<div class="col-5 d-none d-sm-flex">Comment:</div>
							<div id="calCommentWrapper" class="col-5"><span class="cal-notice-span" id="calComment"></span></div>
							<div class="col-1"></div>
							<div class="p-2 col-1"><i id="calCommentIcon" class="fa-solid fa-2x fa-ellipsis-vertical"></i></div>
						</div>
						<hr />
						<div class="d-flex align-items-center">
							<div class="col-12"><span id="inputErrorMessage"></span></div>                
						</div>
					</div>


					<!-- Modal to delete calibration record: -->
					<div class="modal fade" id="deleteCalRecordModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="deleteCalRecordModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<!--This header is used to populate calibration record name-->
									<h1 class="modal-title fs-5 text-center container-fluid" id="deleteCalRecordModalLabel">
									<span class="delete-calibration-record-name badge bg-info"></span>
									</h1>                    
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
							<div class="modal-body">
								Are you sure you want to delete this calibration record permanently?
							</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									<button type="button" class="btn btn-primary" onclick=deleteCalibrationRecord()>Delete</button>
								</div>
							</div>
						</div>
					</div>
			
			
					<div class="card-footer bg-transparent border-success text-center">
						<div class="container">
							<div class="row d-none d-sm-flex m-2">
								<div class="form-group col text-center">                           
									<button id="patch-cal-record" type="submit" class="btn btn-primary" onclick=patchCalibrationRecord() disabled>Submit</button>
									<button type="button" class="btn btn-danger" onclick=openCalWarningModal()
											data-bs-toggle="modal" data-bs-target="#deleteCalRecordModal">
										Delete
									</button>
									<a href="../index.html" class="btn btn-dark">Back</a>
								</div>                    
							</div>                    
						</div>
					</div>
				</div>
			</div>
		</div>

    </body>
    <script
		src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
		integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
		crossorigin="anonymous"></script>    
    </script>

    <!-- javascript libraries -->
    <script src="../libs/moment.min.js"></script>
    <script src="../libs/moment-with-locales.min.js"></script>

    <!-- global javascript classes -->
    <script src="../js/classes/calibrationGlobalFactory.js"></script>
    
    <!-- collections and utils -->
    <script src="../js/collections/editCalibrationInputContainer.js"></script>
    <script src="../js/collections/newCalibrationFormContainer.js"></script>
    <script src="../js/utils/trimStringBySubstring.js"></script>
    <script src="../js/utils/removeAllChildNodes.js"></script>

    <!-- javascript calibration folder -->
    <script src="../js/calibration/fetchCalRecordById.js"></script>
    <script src="../js/calibration/utils/filterObjectAndTransform.js"></script>
    <script src="../js/calibration/utils/iconClickEventCallback.js"></script>
    <script src="../js/calibration/utils/inputChangeValueCallback.js"></script>
    <script src="../js/calibration/patchCalibrationRecord.js"></script>
    <script src="../js/calibration/deleteCalRecordById.js"></script>

    <script>

    	// attach event listener to all icons to edit calibration record information
		let icons = document.querySelectorAll('.fa-ellipsis-vertical');
		icons.forEach(icon => {
			icon.addEventListener('click', iconClickEventCallback);
		})

    </script>

</html>
